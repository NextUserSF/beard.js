// Generated by CoffeeScript 1.6.3
(function() {
  describe('Data Tag', function() {
    var ret, tpl;
    tpl = null;
    ret = null;
    beforeEach(function() {
      return tpl = new Beard();
    });
    afterEach(function() {
      return tpl = null;
    });
    describe('Plain Variable', function() {
      it('should return correct value', function() {
        tpl.set('<%= variable %>');
        tpl.addVariable('variable', 'Variable');
        ret = tpl.render();
        return expect(ret).toEqual('Variable');
      });
      return it('should return default value', function() {
        tpl.set('<%= variable | "Default" %>');
        ret = tpl.render();
        return expect(ret).toEqual('Default');
      });
    });
    describe('Nested Variable', function() {
      it('should return correct value', function() {
        tpl.set('<%= nested.variable %>');
        tpl.addVariable('nested', {
          variable: 'Nested Variable'
        });
        ret = tpl.render();
        return expect(ret).toEqual('Nested Variable');
      });
      return it('should return default value', function() {
        tpl.set('<%= nested.variable | "Default" %>');
        ret = tpl.render();
        return expect(ret).toEqual('Default');
      });
    });
    describe('Plain Function Call', function() {
      it('should return correct value', function() {
        tpl.set('<%= func() %>');
        tpl.addVariable('func', function() {
          return 'Function call';
        });
        ret = tpl.render();
        return expect(ret).toEqual('Function call');
      });
      it('should return default value', function() {
        tpl.set('<%= func() | "Default" %>');
        ret = tpl.render();
        return expect(ret).toEqual('Default');
      });
      return it('should handle `this` correct', function() {
        tpl.set('<%= full_name() %>');
        tpl.addVariable('first_name', 'John');
        tpl.addVariable('last_name', 'Doe');
        tpl.addVariable('full_name', function() {
          return "" + this.first_name + " " + this.last_name;
        });
        ret = tpl.render();
        return expect(ret).toEqual('John Doe');
      });
    });
    describe('Plain Function Call with Arguments', function() {
      it('should return correct value', function() {
        tpl.set('<%= func("Function call") %>');
        tpl.addVariable('func', function(x) {
          return x;
        });
        ret = tpl.render();
        return expect(ret).toEqual('Function call');
      });
      return it('should return default value', function() {
        tpl.set('<%= func("Function call") | "Default" %>');
        ret = tpl.render();
        return expect(ret).toEqual('Default');
      });
    });
    describe('Nested Function Call', function() {
      it('should return correct value', function() {
        tpl.set('<%= nested.func() | "Default" %>');
        tpl.addVariable('nested', {
          func: function() {
            return 'Function call';
          }
        });
        ret = tpl.render();
        return expect(ret).toEqual('Function call');
      });
      it('should return default value', function() {
        tpl.set('<%= nested.func() | "Default" %>');
        ret = tpl.render();
        return expect(ret).toEqual('Default');
      });
      return it('should handle `this` correct', function() {
        tpl.set('<%= nested.full_name() %>');
        tpl.addVariable('first_name', 'Robert');
        tpl.addVariable('last_name', 'Roe');
        tpl.addVariable('full_name', function() {
          return "" + this.first_name + " " + this.last_name;
        });
        tpl.addVariable('nested', {
          first_name: 'John',
          last_name: 'Doe',
          full_name: function() {
            return "" + this.first_name + " " + this.last_name;
          }
        });
        ret = tpl.render();
        return expect(ret).toEqual('John Doe');
      });
    });
    describe('Nested Function Call with Arguments', function() {
      return it('should return correct value', function() {
        tpl.set('<%= nested.func("Function call") | "Default" %>');
        tpl.addVariable('nested', {
          func: function(x) {
            return x;
          }
        });
        ret = tpl.render();
        return expect(ret).toEqual('Function call');
      });
    });
    describe('Plain Function-Value mixture', function() {
      return it('should return correct value', function() {
        tpl.set('<%= func().variable %>');
        tpl.addVariable('func', function() {
          return {
            variable: 'Variable'
          };
        });
        ret = tpl.render();
        return expect(ret).toEqual('Variable');
      });
    });
    return describe('Default parameters', function() {
      it('should return String', function() {
        tpl.set('<%= variable | "Default" %>');
        ret = tpl.render();
        return expect(ret).toEqual('Default');
      });
      it('should return Integer', function() {
        tpl.set('<%= variable | 1024 %>');
        ret = tpl.render();
        return expect(ret).toEqual('1024');
      });
      return it('should return Boolean', function() {
        tpl.set('<%= variable | true %>');
        ret = tpl.render();
        return expect(ret).toEqual('true');
      });
    });
  });

  describe('Comment Tag', function() {
    var ret, tpl;
    tpl = null;
    ret = null;
    beforeEach(function() {
      tpl = new Beard();
      tpl.set('<%# This is comment %>');
      return ret = tpl.render();
    });
    afterEach(function() {
      return tpl = null;
    });
    return it('should return nothing', function() {
      return expect(ret).toEqual('');
    });
  });

}).call(this);
